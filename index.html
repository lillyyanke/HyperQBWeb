<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Your Name</title>
</head>
<body>
    <div class="grid-2">
        <div class="section-1">
            <i class="fas fa-code fa-5x white"></i>
            <h2>HyperQB Web UI Project</h2>
            <p>Summer 2024</p>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-linkedin"></i></a>
            <a href="#"><i class="fab fa-github"></i></a>
        </div>
        <div class="section-2" id="forms">
            <h2>About</h2>
            <p>This is a testing website for building HyperQB WebUI.</p>

            <h2>Goal: Build an Interactable Interface for HyperQB</h2>
            <p>The user should be able to give the website a model, a property, and all necessary parameters, and click on "model check it", and return a YES/NO answer. </br>
            Extending functions such as checkboxes on parameters, importing models/properties, or display demo models/properties can be later added.</br> 
            </p>

            <h2>Task 1 (6/5/24)</h2>
            <h3>1st STEP</h3>
            <p>Create a textbox call "model" below which it can store the input text as a string variable as "model"</p>
            <p>Create a textbox call "property" below which it can store the input text as a string variable as "property"</p> 

            <h3>2nd STEP</h3>
            <p>Create a botton named "read", and then (1) print the "model" and "property" in a display area, and (2) save the "model" and "property" as variable or internal files. </p>

            <p>
                Connect the intputs from textboxes to a python script. Make the above inputs "Model" and "Property" as inputs to "add.py", call this function, and then print the output in "Result". 
            </p>

            <!-- write all your code here! :) -->
            <form id="addForm">
            <!-- Add the model input text box -->
             <label for="modelInput">Model:</label>
             <input type="text" id="modelInput" name="modelInput">

            <!-- Add the property input text box -->
             <label for="propertyInput">Property:</label>
             <input type="text" id="propertyInput" name="propertyInput">

             <!-- Add a button to trigger storing the input -->
            <button type="submit" id="addSubmit">Read</button>
             <hr>
            </form>

             <!-- This will display the result -->
             <label for="output">Result:</label>
             <textarea id="output" rows="5" cols="50" readonly></textarea>


            <h2>Task 2 (6/11/24)</h2>    
            <p>Try execute genqbf with PHP, and execute genqbf with PHP using inputs.</p>
            
            <h2>(1) Trigger a command </h2>
            
            <form>
                <button type="submit" id="runCommand">Run command.sh</button>
                <br/>
                 <label for="output">Display HQ.qcir generated by command.sh</label>
                <textarea id="runCommandOutput" rows="5" cols="50" readonly></textarea>
                 <hr>
            </form>

            <h2>(2) Trigger genqbf with input arguments </h2>
            <form id="Run bin/genqbf Form">
                 <label>Input arguments to genqbf:</label>
                 <input type="text" id="inputArgs">
            
                <button type="submit" id="runBin">Run bin/genqbf</button>
                <br/>
                 <label for="output">Display HQ.qcir generated by executing bin/genqbf</label>
                 <textarea id="binOutput" rows="5" cols="50" readonly></textarea>
                 <hr>
            </form>

            <h2>Task 3 (6/13/24)</h2>
            <p>Make input arguments as interface inputs.</p>

            <form id="runForm" method="post" enctype="multipart/form-data">

                <!-- test folder number (JUST FOR TESTING) -->
                <div class="form-row">
                    <label for="test_folder">Test folder # just for testing purposes:</label>
                    <input type="text" id="test_folder" name="test_folder">
                   </div> 


                <!--Model 1 init input box for typing input -->
                <div class="form-row">
                 <label for="model_1_init">Model 1 init:</label>
                 <input type="text" id="model_1_init" name="model_1_init">
                </div>

                <div class="form-row">
                 <!-- File input field for selecting a file -->
                 <label for="model_1_init_select">Or Select a File:</label>
                 <input type="file" id="model_1_init_select" name="model_1_init_select">
                </div>

                <!--Model 1 trans input box for typing file name -->
                <div class="form-row">
                    <label for="model_1_trans">Model 1 trans:</label>
                    <input type="text" id="model_1_trans" name="model_1_trans">
                   </div>
   
                   <div class="form-row">
                    <!-- File input field for selecting a file -->
                    <label for="model_1_trans_select">Or Select a File:</label>
                    <input type="file" id="model_1_trans_select" name="model_1_trans_select">
                   </div>        
                   
                <!--Model 2 init input box for typing input -->
                <div class="form-row">
                    <label for="model_2_init">Model 2 init:</label>
                    <input type="text" id="model_2_init" name="model_2_init">
                   </div>
   
                   <div class="form-row">
                    <!-- File input field for selecting a file -->
                    <label for="model_2_init_select">Or Select a File:</label>
                    <input type="file" id="model_2_init_select" name="model_2_init_select">
                   </div>
   
                   <!--Model 2 trans input box for typing file name -->
                   <div class="form-row">
                       <label for="model_2_trans">Model 2 trans:</label>
                       <input type="text" id="model_2_trans" name="model_2_trans">
                      </div>
      
                      <div class="form-row">
                       <!-- File input field for selecting a file -->
                       <label for="model_2_trans_select">Or Select a File:</label>
                       <input type="file" id="model_2_trans_select" name="model_2_trans_select">
                      </div>     

                <!-- -k input -->
                <div class="form-row">
                    <label for="number_k">K:</label>
                    <input type="text" id="number_k" name="number_k">
                   </div>      
                
                <!-- -F input -->
                <div class="form-row">
                    <label for="quantifier_f">F:</label>
                    <input type="text" id="quantifier_f" name="quantifier_f">
                   </div>      
                
                <!-- -f qcir (default for now) -->
                <div class="form-row">
                    <label for="f_qcir">f:</label>
                    <input type="text" id="f_qcir" name="f_qcir" value="qcir (DEFAULT)">
                   </div>      
                 
                <!-- -o test/HQ.qcir (default for now) -->
                <div class="form-row">
                    <label for="o_qcir">o:</label>
                    <input type="text" id="o_qcir" name="o_qcir" value="qcir (DEFAULT)">
                   </div>    
                   
                <!-- -sem input -->
                <div class="form-row">
                    <label for="semantics">Semantics:</label>
                    <input type="text" id="semantics" name="semantics">
                   </div>       
                 
                <!-- -n --fast -new NN (default for now) -->
                <div class="form-row">
                    <label for="nfn">-n --fast -new:</label>
                    <input type="text" id="nfn" name="nfn" value="NN (DEFAULT)">
                   </div>       

    
                 <!-- Add a button to trigger storing the input -->
                 <button type="submit" id="run">Run</button>
                 <br/>
                 <!-- Result display -->
                 <label for="output">Result</label>
                 <textarea id="runOutput" rows="5" cols="50" readonly></textarea>
                 <hr>
            </form>

            
        </div>
    </div>
  
     <script>
          document.getElementById('forms').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Determine which submit button was clicked
            const submitter = event.submitter;

            // Log which button was clicked
            console.log('Submitter ID:', submitter.id);

            // Test add.py button was clicked
            if (submitter.id == 'addSubmit') {
                const modelInput = document.getElementById('modelInput').value;
                const propertyInput = document.getElementById ('propertyInput').value;
                fetch('add.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: 'modelInput=' + encodeURIComponent(modelInput) + '&propertyInput=' + encodeURIComponent(propertyInput)
                })  
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        document.getElementById('output').innerText = `Error: ${data.error}`;
                    } else {
                        document.getElementById('output').innerText = `${data.result}`;
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                    document.getElementById('output').innerText = 'An error occurred while processing the request.';
                });
            }

            // Trigger a command / Run command.sh button clicked
            else if (submitter.id == 'runCommand') {
            
                
            }

            // Trigger genqbf w input args / Run bin/genqbf button clicked
            else if (submitter.id == 'runBin') {
                const inputArgs = document.getElementById('inputArgs').value;
                fetch('genqbf.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: 'inputArgs=' + encodeURIComponent(inputArgs) 
                })  
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        document.getElementById('binOutput').innerText = `Error: ${data.error}`;
                    } else {
                        document.getElementById('binOutput').innerText = `${data.result}`;
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                    document.getElementById('binOutput').innerText = 'An error occurred while processing the request.';
                });

            }

            // Trigger a command / Run button clicked
            else if (submitter.id == 'run')
            {
                const model_1_init = document.getElementById('model_1_init').value;
                const model_1_trans = document.getElementById('model_1_trans').value;
                const model_1_init_select = document.getElementById('model_1_init_select').files[0];
                const model_1_trans_select = document.getElementById('model_1_trans_select').files[0];

                const model_2_init = document.getElementById('model_2_init').value;
                const model_2_trans = document.getElementById('model_2_trans').value;
                const model_2_init_select = document.getElementById('model_2_init_select').files[0];
                const model_2_trans_select = document.getElementById('model_2_trans_select').files[0];

                const number_k = document.getElementById('number_k').value;
                const quantifier_f = document.getElementById('quantifier_f').value;
                const semantics = document.getElementById('semantics').value;
                const nfn = document.getElementById('nfn').value;

                const test_folder = document.getElementById('test_folder').value;

                let formData = new FormData();

                if (test_folder) {
                    formData.append('test_folder', test_folder);
                }
                else {
                    formData.append('test_folder', '');
                }

                // Check if a file was selected
                if (model_1_init_select) {
                    formData.append('model_1_init_select', model_1_init_select);
                }
                else {
                        formData.append('model_1_init', model_1_init);
                }
                console.log("form",formData[0]);

                // Check if a file was selected
                if (model_1_trans_select) {
                    formData.append('model_1_trans_select', model_1_trans_select);
                }
                else {
                    // if (model_1_trans === '') {
                    //     document.getElementById('runOutput').innerText = 'Error: Model 2 Trans Input cannot be empty.';
                    //     return;
                    // }   
                    // else
                    // {
                        formData.append('model_1_trans', model_1_trans);
                    //}
                }

                 // Check if a file was selected
                 if (model_2_init_select) {
                    formData.append('model_2_init_select', model_2_init_select);
                }
                else {
                        formData.append('model_2_init', model_2_init);
                }

                // Check if a file was selected
                if (model_2_trans_select) {
                    formData.append('model_2_trans_select', model_2_trans_select);
                }
                else {
                        formData.append('model_2_trans', model_2_trans);
                }

                if (number_k) {
                    formData.append('number_k', number_k);
                }
                else {
                    formData.append('number_k', '3');
                }

                if (quantifier_f) {
                    formData.append('quantifier_f', quantifier_f);
                }
                else {
                    formData.append('quantifier_f', 'AA');
                }

                if (semantics) {
                    formData.append('semantics', semantics);
                }
                else {
                    formData.append('semantics', 'PES');
                }
        


                fetch('runAll.php', {
                method: 'POST',
                // headers: {
                //     'Content-Type': 'application/x-www-form-urlencoded'
                // },
                body: formData //'model_1_init=' + encodeURIComponent(model_1_init) 
                })  
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        document.getElementById('runOutput').innerText = `Error: ${data.error}`;
                    } else {
                        document.getElementById('runOutput').innerText = `${data.result}`;
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                    document.getElementById('runOutput').innerText = 'An error occurred while processing the request.';
                });

            }

          });
     </script>
</body>
</html>
